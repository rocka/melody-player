{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./src/player.less","webpack:///./src/font-face.less","webpack:///./node_modules/css-loader/dist/runtime/getUrl.js","webpack:///./font/ic.min.woff2","webpack:///./node_modules/lrc-kit/lib/esm/line-parser.js","webpack:///./node_modules/lrc-kit/lib/esm/lrc.js","webpack:///./node_modules/lrc-kit/lib/esm/runner.js","webpack:///./src/h.js","webpack:///./src/player.jsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","useSourceMap","list","toString","this","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","concat","sourceURLs","sources","source","sourceRoot","join","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","length","id","_i","push","___CSS_LOADER_API_IMPORT___","___CSS_LOADER_GET_URL_IMPORT___","___CSS_LOADER_URL_IMPORT_0___","___CSS_LOADER_URL_REPLACEMENT_0___","url","options","default","test","slice","hash","needQuotes","replace","LineType","TAGS_REGEXP","INFO_REGEXP","TIME_REGEXP","parseLine","line","tag","matches","parsedTags","trim","exec","substr","split","parseTags","tags","timestamps","forEach","minutes","parseFloat","seconds","type","TIME","parseTime","INFO","INVALID","_e","padZero","num","size","timestampToString","timestamp","Math","floor","toFixed","Lrc","info","lyrics","parse","text","lrc","offset","offsetTime","lyric","clone","clonePlainObject","obj","newObj","reduce","ret","opts","combine","lineFormat","sort","lines","lyricsMap","lyricsList","a","b","Runner","_currentIndex","setLrc","lrcUpdate","_offsetAlign","_sort","parseInt","isNaN","timeUpdate","_findIndex","startIndex","curFrontTimestamp","Number","NEGATIVE_INFINITY","curBackTimestamp","POSITIVE_INFINITY","getInfo","getLyrics","getLyric","index","curIndex","Error","curLyric","h","attr","children","elm","document","createElement","entries","k","v","setAttribute","ev","toLowerCase","addEventListener","child","appendChild","createTextNode","cb","MelodyPlayer","HTMLElement","Once","Single","List","Shuffle","0","1","2","3","Loading","Loaded","Failed","None","window","customElements","TagName","define","head","PLAYER_FONT_FACE","args","console","log","LogTag","error","dt","Date","mm","getUTCMinutes","getUTCHours","ss","getUTCSeconds","hide","style","display","_singleMode","requestAnimationFrame","hostElem","removeAttribute","_playing","btnPlay","textContent","dataset","syncProgress","e","_playIndex","au","audios","duration","timerTotal","time","fetchLyric","then","shouldRender","renderLyric","_lyricStatus","lyricMaskLoading","containerLyric","lyricMaskFailed","lyricMaskNone","_lyricIndex","before","current","bf","classList","remove","cur","add","clientHeight","offsetTop","transform","_loopMode","btnLoop","LoopMode","_displayVisible","btnLyric","containerDisplay","registerAudio","audio","evInit","detail","playing","handleAudioPlaying","dispatchEvent","CustomEvent","handleAudioEnd","init","loopMode","displayVisible","playIndex","singleMode","updateProgress","buffered","currentTime","played","loaded","end","timerPlay","progressPlay","width","percent","progressLoad","setTimeout","lyricStatus","urls","subLrc","tasks","lrcUrl","promise","fetch","ok","assign","status","err","catch","Promise","all","cmp","lyricElms","j","sl","frag","createDocumentFragment","class","data-timestamp","nextLyricIndex","lyricIndex","loopStart","activeLyric","_currentSecond","_play","play","_pause","position","pause","handlePlayOrPause","nextPlayIndex","force","total","random","handleNext","handleLoopMode","loop","handleProgressSeek","rect","progressFull","getBoundingClientRect","seekTime","clientX","left","handleToggleDisplay","render","shadow","attachShadow","PLAYER_STYLE","ref","btnPrev","onClick","data-play","data-pause","btnNext","data-once","data-single","data-list","data-shuffle","constructor","super","resolve","Array","from","filter","HTMLAudioElement","defineElement","readyState"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,+BC1ErDhC,EAAOD,QAAU,SAAUkC,GACzB,IAAIC,EAAO,GAuDX,OArDAA,EAAKC,SAAW,WACd,OAAOC,KAAKC,KAAI,SAAUC,GACxB,IAAIC,EAsDV,SAAgCD,EAAML,GACpC,IAAIM,EAAUD,EAAK,IAAM,GAErBE,EAAaF,EAAK,GAEtB,IAAKE,EACH,OAAOD,EAGT,GAAIN,GAAgC,mBAATQ,KAAqB,CAC9C,IAAIC,GAWWC,EAXeH,EAa5BI,EAASH,KAAKI,SAASC,mBAAmBC,KAAKC,UAAUL,MACzDM,EAAO,+DAA+DC,OAAON,GAC1E,OAAOM,OAAOD,EAAM,QAdrBE,EAAaX,EAAWY,QAAQf,KAAI,SAAUgB,GAChD,MAAO,iBAAiBH,OAAOV,EAAWc,YAAc,IAAIJ,OAAOG,EAAQ,UAE7E,MAAO,CAACd,GAASW,OAAOC,GAAYD,OAAO,CAACR,IAAgBa,KAAK,MAOrE,IAAmBZ,EAEbC,EACAK,EAPJ,MAAO,CAACV,GAASgB,KAAK,MAvEJC,CAAuBlB,EAAML,GAE3C,OAAIK,EAAK,GACA,UAAUY,OAAOZ,EAAK,GAAI,MAAMY,OAAOX,EAAS,KAGlDA,KACNgB,KAAK,KAKVrB,EAAKjC,EAAI,SAAUE,EAASsD,EAAYC,GACf,iBAAZvD,IAETA,EAAU,CAAC,CAAC,KAAMA,EAAS,MAG7B,IAAIwD,EAAyB,GAE7B,GAAID,EACF,IAAK,IAAIzD,EAAI,EAAGA,EAAImC,KAAKwB,OAAQ3D,IAAK,CAEpC,IAAI4D,EAAKzB,KAAKnC,GAAG,GAEP,MAAN4D,IACFF,EAAuBE,IAAM,GAKnC,IAAK,IAAIC,EAAK,EAAGA,EAAK3D,EAAQyD,OAAQE,IAAM,CAC1C,IAAIxB,EAAO,GAAGY,OAAO/C,EAAQ2D,IAEzBJ,GAAUC,EAAuBrB,EAAK,MAKtCmB,IACGnB,EAAK,GAGRA,EAAK,GAAK,GAAGY,OAAOO,EAAY,SAASP,OAAOZ,EAAK,IAFrDA,EAAK,GAAKmB,GAMdvB,EAAK6B,KAAKzB,MAIPJ,I,iBC9DTnC,EADkC,EAAQ,EAChCiE,EAA4B,IAE9BD,KAAK,CAAC/D,EAAOC,EAAI,+7EAAg8E,KAEz9ED,EAAOD,QAAUA,G,gBCLjB,IAAIiE,EAA8B,EAAQ,GACtCC,EAAkC,EAAQ,GAC1CC,EAAgC,EAAQ,GAC5CnE,EAAUiE,GAA4B,GACtC,IAAIG,EAAqCF,EAAgCC,GAEzEnE,EAAQgE,KAAK,CAAC/D,EAAOC,EAAI,oDAAsDkE,EAAqC,qBAAsB,KAE1InE,EAAOD,QAAUA,G,6BCPjBC,EAAOD,QAAU,SAAUqE,EAAKC,GAS9B,OARKA,IAEHA,EAAU,IAMO,iBAFnBD,EAAMA,GAAOA,EAAI/C,WAAa+C,EAAIE,QAAUF,GAGnCA,GAIL,eAAeG,KAAKH,KAEtBA,EAAMA,EAAII,MAAM,GAAI,IAGlBH,EAAQI,OAEVL,GAAOC,EAAQI,MAKb,cAAcF,KAAKH,IAAQC,EAAQK,WAC9B,IAAKxB,OAAOkB,EAAIO,QAAQ,KAAM,OAAOA,QAAQ,MAAO,OAAQ,KAG9DP,K,6BChCT,OAAe,6zC,oCCCR,IAKIQ,EALAC,EAAc,aAEdC,EAAc,qBAEdC,EAAc,6CAoDlB,SAASC,EAAUC,GACtB,IAtBsBC,EAClBC,EAqBAC,EA9CD,SAAmBH,GACtBA,EAAOA,EAAKI,OACZ,IAAIF,EAAUN,EAAYS,KAAKL,GAC/B,GAAgB,OAAZE,EACA,OAAO,KAEX,IAAID,EAAMC,EAAQ,GACd5C,EAAU0C,EAAKM,OAAOL,EAAItB,QAC9B,MAAO,CAACsB,EAAIV,MAAM,GAAI,GAAGgB,MAAM,WAAYjD,GAsC1BkD,CAAUR,GAC3B,IACI,GAAIG,EAAY,CACZ,IAAIM,EAAON,EAAW,GAAI7C,EAAU6C,EAAW,GAC/C,OAAIL,EAAYR,KAAKmB,EAAK,IAxC/B,SAAmBA,EAAMnD,GAC5B,IAAIoD,EAAa,GAOjB,OANAD,EAAKE,SAAQ,SAAUV,GACnB,IAAIC,EAAUJ,EAAYO,KAAKJ,GAC3BW,EAAUC,WAAWX,EAAQ,IAC7BY,EAAUD,WAAWX,EAAQ,GAAGR,QAAQ,OAAQ,IAAIA,QAAQ,IAAK,MACrEgB,EAAW5B,KAAe,GAAV8B,EAAeE,MAE5B,CACHC,KAAMpB,EAASqB,KACfN,WAAYA,EACZpD,QAASA,EAAQ8C,QA8BFa,CAAUR,EAAMnD,IA3Bb2C,EA8BOQ,EAAK,GA7B9BP,EAAUL,EAAYQ,KAAKJ,GACxB,CACHc,KAAMpB,EAASuB,KACf3E,IAAK2D,EAAQ,GAAGE,OAChBnE,MAAOiE,EAAQ,GAAGE,SA4BlB,MAAO,CACHW,KAAMpB,EAASwB,SAGvB,MAAOC,GACH,MAAO,CACHL,KAAMpB,EAASwB,UC1EpB,SAASE,EAAQC,EAAKC,GAEzB,SADa,IAATA,IAAmBA,EAAO,GACvBD,EAAIpE,WAAWqD,MAAM,KAAK,GAAG5B,OAAS4C,GACzCD,EAAM,IAAMA,EAChB,OAAOA,EASJ,SAASE,EAAkBC,GAC9B,OAAOJ,EAAQK,KAAKC,MAAMF,EAAY,KAAO,IAAMJ,GAASI,EAAY,IAAIG,QAAQ,KDRxF,SAAWjC,GACPA,EAAQ,QAAc,UACtBA,EAAQ,KAAW,OACnBA,EAAQ,KAAW,OAHvB,CAIGA,IAAaA,EAAW,KCM3B,IAAIkC,EAAqB,WACrB,SAASA,IACL1E,KAAK2E,KAAO,GACZ3E,KAAK4E,OAAS,GAgHlB,OA3GAF,EAAIG,MAAQ,SAAUC,GAClB,IAAIF,EAAS,GACTD,EAAO,GACXG,EACK1B,MAAM,gBACNnD,KAAI,SAAU4C,GACf,OAAOD,EAAUC,MAEhBW,SAAQ,SAAUX,GACnB,OAAQA,EAAKe,MACT,KAAKpB,EAASuB,KACVY,EAAK9B,EAAKzD,KAAOyD,EAAK/D,MACtB,MACJ,KAAK0D,EAASqB,KACVhB,EAAKU,WAAWC,SAAQ,SAAUc,GAC9BM,EAAOjD,KAAK,CACR2C,UAAWA,EACXnE,QAAS0C,EAAK1C,iBAQlC,IAAI4E,EAAM,IAAI/E,KAGd,OAFA+E,EAAIH,OAASA,EACbG,EAAIJ,KAAOA,EACJI,GAEXL,EAAIjF,UAAUuF,OAAS,SAAUC,GAC7BjF,KAAK4E,OAAOpB,SAAQ,SAAU0B,GAC1BA,EAAMZ,WAAaW,EACfC,EAAMZ,UAAY,IAClBY,EAAMZ,UAAY,OAI9BI,EAAIjF,UAAU0F,MAAQ,WAClB,SAASC,EAAiBC,GACtB,IAAIC,EAAS,GACb,IAAK,IAAIlG,KAAOiG,EACZC,EAAOlG,GAAOiG,EAAIjG,GAEtB,OAAOkG,EAEX,IAAIP,EAAM,IAAIL,EAMd,OALAK,EAAIJ,KAAOS,EAAiBpF,KAAK2E,MACjCI,EAAIH,OAAS5E,KAAK4E,OAAOW,QAAO,SAAUC,EAAKN,GAE3C,OADAM,EAAI7D,KAAKyD,EAAiBF,IACnBM,IACR,IACIT,GAQXL,EAAIjF,UAAUM,SAAW,SAAU0F,QAClB,IAATA,IAAmBA,EAAO,IAC9BA,EAAKC,UAAU,YAAaD,IAAOA,EAAKC,QACxCD,EAAKE,WAAa,eAAgBF,EAAOA,EAAKE,WAAa,OAC3DF,EAAKG,OAAO,SAAUH,IAAOA,EAAKG,KAClC,IAAIC,EAAQ,GAAIC,EAAY,GAAIC,EAAa,GAE7C,IAAK,IAAI3G,KAAOY,KAAK2E,KACjBkB,EAAMlE,KAAK,IAAMvC,EAAM,IAAMY,KAAK2E,KAAKvF,GAAO,KAElD,GAAIqG,EAAKC,QAAS,CAWd,IAAK,IAAIvF,KATTH,KAAK4E,OAAOpB,SAAQ,SAAU0B,GACtBA,EAAM/E,WAAW2F,EACjBA,EAAUZ,EAAM/E,SAASwB,KAAKuD,EAAMZ,WAGpCwB,EAAUZ,EAAM/E,SAAW,CAAC+E,EAAMZ,cAItBwB,EACZL,EAAKG,MACLE,EAAU3F,GAASyF,OAEvBG,EAAWpE,KAAK,CACZ4B,WAAYuC,EAAU3F,GACtBA,QAASA,IAGbsF,EAAKG,MACLG,EAAWH,MAAK,SAAUI,EAAGC,GAAK,OAAOD,EAAEzC,WAAW,GAAK0C,EAAE1C,WAAW,MAG5EwC,EAAWvC,SAAQ,SAAU0B,GACzBW,EAAMlE,KAAK,IAAMuD,EAAM3B,WAClBtD,KAAI,SAAUqE,GAAa,OAAOD,EAAkBC,MACpDnD,KAAK,MAAQ,KAAO+D,EAAM/E,SAAW,aAI9CH,KAAK4E,OAAOpB,SAAQ,SAAU0B,GAC1BW,EAAMlE,KAAK,IAAM0C,EAAkBa,EAAMZ,WAAa,KAAOY,EAAM/E,SAAW,QAGtF,OAAO0F,EAAM1E,KAAKsE,EAAKE,aAEpBjB,EAnHc,IChBG,WACxB,SAASwB,EAAOnB,EAAKC,QACL,IAARD,IAAkBA,EAAM,IAAIL,QACjB,IAAXM,IAAqBA,GAAS,GAClChF,KAAKgF,OAASA,EACdhF,KAAKmG,eAAiB,EACtBnG,KAAKoG,OAAOrB,GAEhBmB,EAAOzG,UAAU2G,OAAS,SAAUrB,GAChC/E,KAAK+E,IAAMA,EAAII,QACfnF,KAAKqG,aAETH,EAAOzG,UAAU4G,UAAY,WACrBrG,KAAKgF,QACLhF,KAAKsG,eAETtG,KAAKuG,SAETL,EAAOzG,UAAU6G,aAAe,WAC5B,GAAI,WAAYtG,KAAK+E,IAAIJ,KAAM,CAC3B,IAAIK,EAASwB,SAASxG,KAAK+E,IAAIJ,KAAKK,QAAU,IACzCyB,MAAMzB,KACPhF,KAAK+E,IAAIC,OAAOA,UACThF,KAAK+E,IAAIJ,KAAKK,UAIjCkB,EAAOzG,UAAU8G,MAAQ,WACrBvG,KAAK+E,IAAIH,OAAOgB,MAAK,SAAUI,EAAGC,GAAK,OAAOD,EAAE1B,UAAY2B,EAAE3B,cAElE4B,EAAOzG,UAAUiH,WAAa,SAAUpC,GAChCtE,KAAKmG,eAAiBnG,KAAK+E,IAAIH,OAAOpD,OACtCxB,KAAKmG,cAAgBnG,KAAK+E,IAAIH,OAAOpD,OAAS,EAEzCxB,KAAKmG,eAAiB,IAC3BnG,KAAKmG,eAAiB,GAE1BnG,KAAKmG,cAAgBnG,KAAK2G,WAAWrC,EAAWtE,KAAKmG,gBAEzDD,EAAOzG,UAAUkH,WAAa,SAAUrC,EAAWsC,GAC/C,IAAIC,GAAmC,GAAfD,EAClBE,OAAOC,kBACP/G,KAAK+E,IAAIH,OAAOgC,GAAYtC,UAC9B0C,EAAmBJ,GAAc5G,KAAK+E,IAAIH,OAAOpD,OAAS,EACxDsF,OAAOG,kBACPjH,KAAK+E,IAAIH,OAAOgC,EAAa,GAAGtC,UACtC,OAAIA,EAAYuC,EACL7G,KAAK2G,WAAWrC,EAAWsC,EAAa,GAE1CtC,IAAc0C,EACfA,IAAqBF,OAAOG,kBACrBL,EAGAA,EAAa,EAGnBtC,EAAY0C,EACVhH,KAAK2G,WAAWrC,EAAWsC,EAAa,GAGxCA,GAGfV,EAAOzG,UAAUyH,QAAU,WACvB,OAAOlH,KAAK+E,IAAIJ,MAEpBuB,EAAOzG,UAAU0H,UAAY,WACzB,OAAOnH,KAAK+E,IAAIH,QAEpBsB,EAAOzG,UAAU2H,SAAW,SAAUC,GAElC,QADc,IAAVA,IAAoBA,EAAQrH,KAAKsH,YACjCD,GAAS,GAAKA,GAASrH,KAAK+E,IAAIH,OAAOpD,OAAS,EAChD,OAAOxB,KAAK+E,IAAIH,OAAOyC,GAGvB,MAAM,IAAIE,MAAM,oBAGxBrB,EAAOzG,UAAU6H,SAAW,WACxB,OAAOtH,KAAKmG,eAEhBD,EAAOzG,UAAU+H,SAAW,WACxB,OAAOxH,KAAKoH,YAnFQ,GCEb,SAASK,EAAErJ,EAAMsJ,KAASC,GACrC,MAAMC,EAAMC,SAASC,cAAc1J,GA4BnC,OA1BIsJ,GACAnJ,OAAOwJ,QAAQL,GAAMlE,QAAQ,EAAEwE,EAAGC,MAC9B,GAAU,QAAND,EAIJ,cAAeC,GACX,IAAK,SACDL,EAAIM,aAAaF,EAAGC,GACpB,MACJ,IAAK,WACD,MAAME,EAAKH,EAAEzF,QAAQ,MAAO,IAAI6F,cAChCR,EAAIS,iBAAiBF,EAAIF,QAT7BA,EAAEL,KAedD,EAASnE,QAAQ8E,IACQ,iBAAVA,EACPV,EAAIW,YAAYV,SAASW,eAAeF,IAExCV,EAAIW,YAAYD,KAIjBV,E,IC4hBVa,E,gCApjBD,MAAMC,UAAqBC,YACvB,qBAAuB,MAAO,gBAE9B,sBACI,MAAO,CACHC,KAAM,EACNC,OAAQ,EACRC,KAAM,EACNC,QAAS,EACTC,EAAG,OACHC,EAAG,SACHC,EAAG,OACHC,EAAG,WAIX,yBACI,MAAO,CACHC,QAAS,EACTC,OAAQ,EACRC,OAAQ,EACRC,KAAM,EACNP,EAAG,UACHC,EAAG,SACHC,EAAG,SACHC,EAAG,QAIX,oBAAsB,MAAO,iBAE7B,uBACSK,OAAOC,eAAe/K,IAAIsB,KAAK0J,WAChCF,OAAOC,eAAeE,OAAO3J,KAAK0J,QAAS1J,MAC3C6H,SAAS+B,KAAKrB,YAAY,eAAQsB,IAAiB9J,cAI3D,cAAc+J,GACVC,QAAQC,IAAItB,EAAauB,UAAWH,GAGxC,cAAcA,GACVC,QAAQG,MAAMxB,EAAauB,UAAWH,GAG1C,eAAe3F,GACX,GAAmB,iBAARA,EACP,MAAM,IAAIoD,MAAM,0BAEpB,OAAiB,IAANpD,GAAWM,QAAQ,GAAtB,IAGZ,YAAYN,GACR,GAAmB,iBAARA,EACP,MAAM,IAAIoD,MAAM,uBAEpB,MAAM4C,EAAK,IAAIC,KAAW,IAANjG,GACdkG,EAAKF,EAAGG,gBAAqC,GAAnBH,EAAGI,cAC7BC,EAAKL,EAAGM,gBACd,MAAO,CAACJ,EAAIG,EAAK,EAAIA,EAAM,IAAGA,GAAMrJ,KAAK,KAQ7C,YAAYyG,EAAK8C,GAAO,GACpB9C,EAAI+C,MAAMC,QAAUF,EAAO,OAAS,GAGxC,iBAAmB,OAAO1K,KAAK6K,YAC/B,eAAe/L,GACPA,IAAUkB,KAAK6K,cACfrB,OAAOsB,sBAAsB,MACX,IAAVhM,EACAkB,KAAK+K,SAAS7C,aAAa,SAAU,IAErClI,KAAK+K,SAASC,gBAAgB,YAGtChL,KAAK6K,YAAc/L,GAI3B,cAAgB,OAAOkB,KAAKiL,SAC5B,YAAYnM,GACR,GAAIA,IAAUkB,KAAKiL,SAAU,CACzBjL,KAAKiL,SAAWnM,EAChB,MAAM8I,EAAM5H,KAAKkL,QACjB1B,OAAOsB,sBAAsB,KACzBlD,EAAIuD,YAAcvD,EAAIwD,QAAQtM,EAAQ,QAAU,UAEpD,IAAMkB,KAAKqL,eAAkB,MAAOC,MAI5C,gBAAkB,OAAOtL,KAAKuL,WAC9B,cAAczM,GACV,GAAIA,IAAUkB,KAAKuL,WAAY,CAC3BvL,KAAKuL,WAAazM,EAClB,MAAM0M,EAAKxL,KAAKyL,OAAO3M,GACnBgI,OAAOL,MAAM+E,EAAGE,UAChBF,EAAGnD,iBAAiB,iBAAkB,KAClCrI,KAAK2L,WAAWR,YAAczC,EAAakD,KAAKJ,EAAGE,YAGvD1L,KAAK2L,WAAWR,YAAczC,EAAakD,KAAKJ,EAAGE,UAEvD1L,KAAKqL,eACLrL,KAAK6L,aAAaC,KAAKC,GAAgBA,EAAe/L,KAAKgM,cAAgB,OAInF,kBAAoB,OAAOhM,KAAKiM,aAChC,gBAAgBnN,GACRA,IAAUkB,KAAKiM,eACfjM,KAAKiM,aAAenN,EACpB,CACIkB,KAAKkM,iBACLlM,KAAKmM,eACLnM,KAAKoM,gBACLpM,KAAKqM,eACP7I,QAAQ,CAACoE,EAAK/J,IAAM6K,EAAagC,KAAK9C,EAAK9I,IAAUjB,KAI/D,iBAAmB,OAAOmC,KAAKsM,YAC/B,eAAexN,GACPA,IAAUkB,KAAKsM,cACf9C,OAAOsB,uBAAsB,CAAEyB,EAAQC,KACnC,MAAMC,EAAKzM,KAAK4E,OAAO2H,GACnBE,GAAMA,EAAGC,UAAUC,OAAO,UAC9B,MAAMC,EAAM5M,KAAK4E,OAAO4H,GACpBI,GAAOA,EAAIF,UAAUG,IAAI,UAC7B,IAAI7H,EAAS,GACP4H,EAAIE,aAAe,EACnBF,EAAIG,UACJ,GACN/M,KAAKmM,eAAexB,MAAMqC,UAAa,cAAahI,SACrD3F,KAAKW,KAAMA,KAAKsM,YAAaxN,IAChCkB,KAAKsM,YAAcxN,GAI3B,eAAiB,OAAOkB,KAAKiN,UAC7B,aAAanO,GACT,GAAIA,IAAUkB,KAAKiN,UAAW,CAC1BjN,KAAKiN,UAAYnO,EACjB,MAAM8I,EAAM5H,KAAKkN,QACjB1D,OAAOsB,sBAAsB,KACzBlD,EAAIuD,YAAcvD,EAAIwD,QAAQ1C,EAAayE,SAASrO,OAKhE,qBAAuB,OAAOkB,KAAKoN,gBACnC,mBAAmBtO,GACXA,IAAUkB,KAAKoN,kBACf5D,OAAOsB,sBAAsB,MACX,IAAVhM,GACAkB,KAAKqN,SAASX,UAAUG,IAAI,QAC5B7M,KAAKsN,iBAAiBZ,UAAUG,IAAI,YAEpC7M,KAAKqN,SAASX,UAAUC,OAAO,QAC/B3M,KAAKsN,iBAAiBZ,UAAUC,OAAO,aAG/C3M,KAAKoN,gBAAkBtO,GAO/B,SAAW,OAAOkB,KAAKyL,OAAOzL,KAAKuL,YAMnCgC,cAAcC,GACVxN,KAAKyL,OAAO9J,KAAK6L,GACjB,MAAMC,EAAS,CAAEC,OAAQ,CAAEF,UAC3BA,EAAMnF,iBAAiB,OAAQ,KAC3BrI,KAAK2N,SAAU,EACf3N,KAAK4N,qBACL5N,KAAK6N,cAAc,IAAIC,YAAY,OAAQL,MAE/CD,EAAMnF,iBAAiB,QAAS,KAC5BrI,KAAK2N,SAAU,EACf3N,KAAK6N,cAAc,IAAIC,YAAY,QAASL,MAEhDD,EAAMnF,iBAAiB,QAAS,KAC5BrI,KAAK+N,iBACL/N,KAAK6N,cAAc,IAAIC,YAAY,WAAYL,MAIvDO,OACIhO,KAAK2N,SAAU,EACf3N,KAAKiO,SAAWvF,EAAayE,SAASvE,KACtC5I,KAAKkO,gBAAiB,EACtB,MAAM,OAAE1M,GAAWxB,KAAKyL,OACpBjK,EAAS,IACTxB,KAAKmO,UAAY,EACjBnO,KAAKoO,WAAwB,IAAX5M,GAI1B6M,iBACI,MAAM,SAAEC,EAAF,YAAYC,EAAZ,SAAyB7C,GAAa1L,KAAKwL,GAC3CgD,EAASD,EAAc7C,EAC7B,IAAI+C,EAAS,EACW,IAApBH,EAAS9M,SACTiN,EAASH,EAASI,IAAIJ,EAAS9M,OAAS,GAAKkK,GAEjDlC,OAAOsB,sBAAsB,KACzB9K,KAAK2O,UAAUxD,YAAczC,EAAakD,KAAK2C,GAC/CvO,KAAK4O,aAAajE,MAAMkE,MAAQnG,EAAaoG,QAAQN,GACrDxO,KAAK+O,aAAapE,MAAMkE,MAAQnG,EAAaoG,QAAQL,KAI7DpD,eACI,CAACrL,KAAK4O,aAAc5O,KAAK+O,cAAcvL,QAAsCoE,IACzE4B,OAAOsB,sBAAsB,IAAMlD,EAAI8E,UAAUG,IAAI,SACrDmC,WAAW,KACPxF,OAAOsB,sBAAsB,IAAMlD,EAAI8E,UAAUC,OAAO,UACzD,OAEP3M,KAAKqO,iBAOTxC,aACI7L,KAAKiP,YAAc,EACnB,MAAMzD,EAAKxL,KAAKyL,OAAOzL,KAAKuL,YACtB2D,EAAO,CACTnK,IAAKyG,EAAGJ,QAAH,IACL+D,OAAQ3D,EAAGJ,QAAH,QAKNgE,EAAQ,GACd,IAAK,MAAMxL,KAAQsL,EAAM,CACrB,MAAMG,EAASH,EAAKtL,GACpB,GAAIyL,EAAQ,CACR,MAAMC,EAAUC,MAAMF,GAAQvD,KAAKnN,IAC/B,GAAIA,EAAE6Q,GACF,OAAO7Q,EAAEmG,OAEb,MAAMnG,IACPmN,KAAK/M,IACJ,IACIyM,EAAG5H,GAAQrF,OAAOkR,OAAO,CAAEC,OAAQ,GAAKhL,EAAIG,MAAM9F,IACpD,MAAOuM,GACL5C,EAAaiH,IAAI,YAAarE,GAC9BE,EAAG5H,GAAQ,CAAE8L,OAAQ,EAAG9K,OAAQ,OAErCgL,MAAMtE,IACL5C,EAAaiH,IAAI,cAAerE,GAChCE,EAAG5H,GAAQ,CAAE8L,OAAQ,EAAG9K,OAAQ,MAEpCwK,EAAMzN,KAAK2N,QAEX9D,EAAG5H,GAAQ,CAAE8L,OAAQ,EAAG9K,OAAQ,IAIxC,OAAOiL,QAAQC,IAAIV,GAAOtD,KAAK,IAAMN,IAAOxL,KAAKwL,IAMrDQ,cACI,MAAMR,EAAKxL,KAAKyL,OAAOzL,KAAKuL,YAC5B,GAAsB,IAAlBC,EAAGzG,IAAI2K,QAAqC,IAArBlE,EAAG2D,OAAOO,OAEjC,YADA1P,KAAKiP,YAAc,GAGvB,GAAsB,IAAlBzD,EAAGzG,IAAI2K,QAAqC,IAArBlE,EAAG2D,OAAOO,OAEjC,YADA1P,KAAKiP,YAAc,GAGvBjP,KAAKiP,YAAc,EACnB,MAAMc,EAAM,CAAC/J,EAAGC,IAAMD,EAAE1B,UAAY2B,EAAE3B,UAEhCS,EAAMyG,EAAGzG,IAAIH,OAAOgB,KAAKmK,GAEzBZ,EAAS3D,EAAG2D,OAAOvK,OAAOgB,KAAKmK,GAE/BnL,EAAS,CAAC,CAAEN,UAAW,EAAGnE,QAAS,OAAS6P,EAAY,GAC9D,IAAInS,EAAI,EAAGoS,EAAI,EACf,KAAOpS,EAAIkH,EAAIvD,QAAUyO,EAAId,EAAO3N,QAAQ,CACxC,MAAM1D,EAAIiH,EAAIlH,GAAIqS,EAAKf,EAAOc,GAC1BnS,GAAKoS,GAAMpS,EAAEwG,YAAc4L,EAAG5L,WAC9BM,EAAOjD,KAAK,CAAE2C,UAAWxG,EAAEwG,UAAWnE,QAAU,GAAErC,EAAEqC,YAAY+P,EAAG/P,YACnEtC,IAAMoS,MACEnS,GAAKoS,GAAMpS,GAAKoS,GAAMpS,EAAEwG,UAAY4L,EAAG5L,WAC/CM,EAAOjD,KAAK,CAAE2C,UAAW4L,EAAG5L,UAAWnE,QAAS+P,EAAG/P,UACnD8P,OACQC,GAAMpS,GAAKA,GAAKoS,GAAMA,EAAG5L,UAAYxG,EAAEwG,aAC/CM,EAAOjD,KAAK,CAAE2C,UAAWxG,EAAEwG,UAAWnE,QAASrC,EAAEqC,UACjDtC,KAGR,MAAMsS,EAAOtI,SAASuI,yBACtB,IAAK,MAAMvN,KAAQ+B,EAAQ,CACvB,MAAMgD,EAAM,OAAGyI,MAAM,OAAOC,iBAAgBzN,EAAKyB,WAAYzB,EAAK1C,SAAW,MAC7EyH,EAAItD,UAAYzB,EAAKyB,UACrB6L,EAAK5H,YAAYX,GACjBoI,EAAUrO,KAAKiG,GAEnB5H,KAAK4E,OAASoL,EACdxG,OAAOsB,sBAAsB,KACzB9K,KAAKmM,eAAehB,YAAc,GAClCnL,KAAKmM,eAAe5D,YAAY4H,GAChCnQ,KAAKuQ,mBAIbA,iBACI,GAA0B,IAAtBvQ,KAAKiM,aACL,OAAOjM,KAAKwQ,WAAa,EAE7B,MAAM,YAAEjC,GAAgBvO,KAAKwL,GAC7B,IAAIiF,EAAYzQ,KAAKsM,aAAe,EAEpC,MAAMoE,EAAc1Q,KAAK4E,OAAO5E,KAAKsM,aACrC,GAAIoE,EAAa,CAETnC,GADemC,EAAYpM,YAAcoM,EAAYtF,QAAZ,aAGzCqF,EAAY,GAGpB,IAAK,IAAI5S,EAAI4S,EAAW5S,EAAImC,KAAK4E,OAAOpD,OAAQ3D,IAAK,CACjD,MAAM+J,EAAM5H,KAAK4E,OAAO/G,GAExB,IADa+J,EAAItD,YAAcsD,EAAIwD,QAAJ,WACpBmD,EACP,OAAOvO,KAAKwQ,WAAc3S,EAAQA,EAAI,EAAR,EAGtC,OAAOmC,KAAKwQ,WAAaxQ,KAAK4E,OAAOpD,OAAS,EAGlDoM,qBACI,MAAMhC,EAAO5L,KAAKwL,GAAG+C,YAEjB3C,EAAO5L,KAAK2Q,iBACZ3Q,KAAKqL,eACLrL,KAAK2Q,eAAiBpM,KAAKC,MAAMoH,IAEjCA,EAAO5L,KAAK2Q,eAAiB,IAC7B3Q,KAAKqO,iBACLrO,KAAK2Q,eAAiBpM,KAAKC,MAAMoH,IAEX,IAAtB5L,KAAKiM,cAAsBjM,KAAKoN,iBAChCpN,KAAKuQ,iBAELvQ,KAAKiL,UACL+D,WAAW,IAAMhP,KAAK4N,qBAAsB,KAIpDgD,QACI,OAAO5Q,KAAKwL,GAAGqF,OAMnBC,OAAOC,GAAW,GACd/Q,KAAKwL,GAAGwF,QACS,IAAbD,IACA/Q,KAAKwL,GAAG+C,YAAc,GAI9B0C,oBACQjR,KAAKiL,SACLjL,KAAK8Q,SAEL9Q,KAAK4Q,QAQbM,cAAclM,EAAS,EAAGmM,GAAQ,GAC9B,MAAMnS,EAAOgB,KAAKiO,SACZmD,EAAQpR,KAAKyL,OAAOjK,OAC1B,IAAI3D,EAAImC,KAAKuL,YACC,IAAV4F,GAA2B,IAATnS,GAAuB,IAATA,EAChCnB,EAAKuT,EAAQvT,EAAImH,EACD,IAAThG,IACPnB,EAAI0G,KAAKC,MAAMD,KAAK8M,SAAWD,IAEnCpR,KAAKmO,UAAYtQ,EAAIuT,EAMzBE,WAAWtM,EAAS,GAChBhF,KAAK8Q,OAAO,GACZ9Q,KAAKkR,cAAclM,EAA2B,IAAnBhF,KAAKiN,WAChCjN,KAAK4Q,QAGT7C,iBACI/N,KAAK8Q,OAAO,GACZ9Q,KAAKuQ,iBACLvQ,KAAKkR,gBACkB,IAAnBlR,KAAKiN,WAAuC,IAApBjN,KAAKuL,YAC7BvL,KAAK2N,SAAU,EACf3N,KAAK6N,cAAc,IAAIC,YAAY,aAEnC9N,KAAK4Q,QAIbW,iBACQvR,KAAK6K,aACkB,IAAnB7K,KAAKiN,UACLjN,KAAKiO,SAAW,EAEhBjO,KAAKiO,SAAW,EAEpBjO,KAAKyL,OAAO,GAAG+F,KAA0B,IAAnBxR,KAAKiN,WAE3BjN,KAAKiO,UAAYjO,KAAKiO,SAAW,GAAK,EAQ9CwD,mBAAmBtJ,GACf,MAAMuJ,EAAO1R,KAAK2R,aAAaC,wBACzBC,GAAY1J,EAAG2J,QAAUJ,EAAKK,MAAQL,EAAK7C,MAAQ7O,KAAKwL,GAAGE,SACjE1L,KAAKwL,GAAG+C,YAAcsD,EACtB7R,KAAKqL,eACDrL,KAAKoN,iBACLpN,KAAKuQ,iBAETvQ,KAAK2Q,eAAiBpM,KAAKC,MAAMqN,GAGrCG,sBACIhS,KAAKkO,gBAAkBlO,KAAKoN,gBAGhC6E,SACI,MAAMC,EAASlS,KAAKmS,aAAa,CAAEnT,KAAwD,WACrF2L,EAAQ,eAAQyH,IAAarS,YACnCC,KAAK+K,SACD,SAAKsF,MAAM,WACP,SAAKgC,IAAK1T,GAAKqB,KAAKsN,iBAAmB3O,EAAG0R,MAAM,QAC5C,SAAKgC,IAAK1T,GAAKqB,KAAKkM,iBAAmBvN,EAAG0R,MAAM,YAAW,OAAGA,MAAM,QAAQ,kCAC5E,SAAKgC,IAAK1T,GAAKqB,KAAKoM,gBAAkBzN,EAAG0R,MAAM,YAAW,OAAGA,MAAM,QAAQ,6CAC3E,SAAKgC,IAAK1T,GAAKqB,KAAKqM,cAAgB1N,EAAG0R,MAAM,YAAW,OAAGA,MAAM,QAAQ,yBACzE,SAAKgC,IAAK1T,GAAKqB,KAAKmM,eAAiBxN,EAAG0R,MAAM,SAElD,SAAKA,MAAM,OACP,SAAKA,MAAM,YACP,YAAQgC,IAAK1T,GAAKqB,KAAKsS,QAAU3T,EAAG4T,QAAS,IAAMvS,KAAKsR,YAAY,IAApE,iBACA,YAAQe,IAAK1T,GAAKqB,KAAKkL,QAAUvM,EAAG4T,QAAS,IAAMvS,KAAKiR,oBAAqBuB,YAAU,aAAaC,aAAW,SAA/G,QACA,YAAQJ,IAAK1T,GAAKqB,KAAK0S,QAAU/T,EAAG4T,QAAS,IAAMvS,KAAKsR,cAAxD,cAEJ,SAAKe,IAAK1T,GAAKqB,KAAK2R,aAAehT,EAAG4T,QAASpK,GAAMnI,KAAKyR,mBAAmBtJ,GAAKkI,MAAM,YACpF,SAAKgC,IAAK1T,GAAKqB,KAAK+O,aAAepQ,EAAG0R,MAAM,SAC5C,SAAKgC,IAAK1T,GAAKqB,KAAK4O,aAAejQ,EAAG0R,MAAM,UAEhD,SAAKA,MAAM,SAAQ,UAAMgC,IAAK1T,GAAKqB,KAAK2O,UAAYhQ,GAAjC,QAAnB,MAAqE,UAAM0T,IAAK1T,GAAKqB,KAAK2L,WAAahN,GAAlC,SACrE,SAAK0R,MAAM,aACP,YAAQgC,IAAK1T,GAAKqB,KAAKkN,QAAUvO,EAAG4T,QAAS,IAAMvS,KAAKuR,iBAAkBoB,YAAU,2BAA2BC,cAAY,aAAaC,YAAU,SAASC,eAAa,WAAxK,UACA,YAAQT,IAAK1T,GAAKqB,KAAKqN,SAAW1O,EAAG4T,QAAS,IAAMvS,KAAKgS,uBAAzD,wBAKhBxI,OAAOsB,sBAAsB,KACzBoH,EAAO3J,YAAYoC,GACnBuH,EAAO3J,YAAYvI,KAAK+K,UACxB/K,KAAKkI,aAAa,WAAY,MAItC6K,cACIC,QAEAhT,KAAK6K,YAAc,KACnB7K,KAAK2Q,eAAiB,EAEtB3Q,KAAKiL,SAAW,KAEhBjL,KAAKyL,OAAS,GAEdzL,KAAKuL,WAAa,KAElBvL,KAAKiM,aAAe,KAEpBjM,KAAK4E,OAAS,KAEd5E,KAAKsM,YAAc,KAEnBtM,KAAKiN,UAAY,KAEjBjN,KAAKoN,gBAAkB,KAEvBpN,KAAK+K,SAAW,KAEhB/K,KAAKsN,iBAAmB,KAExBtN,KAAKkM,iBAAmB,KAExBlM,KAAKoM,gBAAkB,KAEvBpM,KAAKqM,cAAgB,KAErBrM,KAAKmM,eAAiB,KAEtBnM,KAAK2R,aAAe,KAEpB3R,KAAK4O,aAAe,KAEpB5O,KAAK+O,aAAe,KAEpB/O,KAAK2O,UAAY,KAEjB3O,KAAK2L,WAAa,KAElB3L,KAAKsS,QAAU,KAEftS,KAAKkL,QAAU,KAEflL,KAAK0S,QAAU,KAEf1S,KAAKkN,QAAU,KAEflN,KAAKqN,SAAW,KAChBwC,QAAQoD,UAAUnH,KAAK,KACnBoH,MAAMC,KAAKnT,KAAK2H,UACXyL,OAAOxL,GAAOA,aAAeyL,kBAC7BpT,IAAI2H,GAAO5H,KAAKuN,cAAc3F,IACnC5H,KAAKgO,OACL,MAAMP,EAAS,CAAEC,OAAQ,CAAEjC,OAAQzL,KAAKyL,SACxCzL,KAAK6N,cAAc,IAAIC,YAAY,QAASL,MAEhDzN,KAAKiS,UAIZxJ,EAME,IAAMC,EAAa4K,gBALU,YAAxBzL,SAAS0L,WACT1L,SAASQ,iBAAiB,mBAAoBI,GAE9CA","file":"player.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".__mld__{font:16px sans-serif;margin:8px;padding:8px;color:#abb2bf;background:#282c34;box-shadow:0 2px 10px rgba(0,0,0,.6)}.__mld__ .disp{position:relative;font-size:14px;height:0;overflow:hidden;transition:height .5s;mask-image:linear-gradient(transparent,#000 45px,#000 105px,transparent);-webkit-mask-image:linear-gradient(transparent,#000 45px,#000 105px,transparent)}.__mld__ .disp .lrc{transform:translateY(0);transition:transform .5s cubic-bezier(.25,.46,.45,.94)}.__mld__ .disp .lrc .line{opacity:.6;margin:16px 0;white-space:pre-wrap;text-align:center;transition:color .2s,opacity .2s}.__mld__ .disp .lrc .line.active{color:#fff;opacity:1;text-shadow:0 0 .3px currentColor}.__mld__ .disp .lrc.mask{position:relative;top:calc(50% - 3em)}.__mld__ .disp.active{height:150px}.__mld__ .ctl{display:flex;align-items:center}.__mld__ .ctl button{color:#abb2bf;font:400 20px/1 MelodyPlayerIcons;text-transform:none;letter-spacing:normal;word-wrap:normal;white-space:nowrap;direction:ltr;font-feature-settings:'liga' 1;display:inline-block;box-sizing:content-box;width:32px;height:32px;border-radius:16px;border:none;margin:0;padding:0;user-select:none;outline:0;cursor:pointer;background:0 0;transition:.5s;-webkit-tap-highlight-color:transparent}.__mld__ .ctl button:hover{transition:background-color .2s,transform .5s;background:rgba(255,255,255,.15)}.__mld__ .ctl button:active{background:rgba(255,255,255,.4)}.__mld__ .ctl button.flip{transform:rotate(180deg)}.__mld__ .ctl button::-moz-focus-inner{border:0}.__mld__ .ctl .porgress{cursor:pointer;position:relative;margin-left:8px;flex-grow:1;height:12px;color:#61aeee;background:rgba(0,0,0,.6)}.__mld__ .ctl .porgress div{width:0;height:100%;position:absolute;transition:width 1s linear}.__mld__ .ctl .porgress div.seek{transition:width .2s}.__mld__ .ctl .porgress .load{background:rgba(255,255,255,.3)}.__mld__ .ctl .porgress .play{background:currentColor}.__mld__ .ctl .porgress .play::after{content:' ';cursor:pointer;color:#fff;position:absolute;box-sizing:content-box;width:2px;height:100%;right:0;top:0;border:0 solid currentColor;box-shadow:0 0 0 transparent;background:currentColor;transition:.2s}.__mld__ .ctl .porgress:hover .play::after{border-width:6px 3px;box-shadow:0 0 4px rgba(0,0,0,.6);top:-6px;right:-3px}.__mld__ .ctl .timer{font-size:14px;margin-left:8px;user-select:none}.__mld__ .ctl .ctl-right{margin-left:8px}.__mld__[single] .ctl-left button:first-child,.__mld__[single] .ctl-left button:last-child{display:none}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_GET_URL_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/getUrl.js\");\nvar ___CSS_LOADER_URL_IMPORT_0___ = require(\"../font/ic.min.woff2\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\nexports.push([module.id, \"@font-face{font-family:MelodyPlayerIcons;src:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") format('woff2')}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    // eslint-disable-next-line no-param-reassign\n    options = {};\n  } // eslint-disable-next-line no-underscore-dangle, no-param-reassign\n\n\n  url = url && url.__esModule ? url.default : url;\n\n  if (typeof url !== 'string') {\n    return url;\n  } // If url is already wrapped in quotes, remove them\n\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    // eslint-disable-next-line no-param-reassign\n    url = url.slice(1, -1);\n  }\n\n  if (options.hash) {\n    // eslint-disable-next-line no-param-reassign\n    url += options.hash;\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n'), \"\\\"\");\n  }\n\n  return url;\n};","export default \"data:font/woff2;base64,d09GMgABAAAAAAPQAA8AAAAACigAAAN5AAEEWgAAAAAAAAAAAAAAAAAAAAAAAAAAGhwbEByCVAZgAIIACAQRCAqHCIQFATYCJANOC04ABCAFgnwHIBtUBwieg3GzHE1cIluZKjJ3mmh/34mH5+/Vc1/nxD1AG+u2hRsD1LGpNM1TkZ9qJmD4W2VLe3b3gB6EyPcCPJkQk0hKnQFHLsdmEWROnX2Gkqb3P4Do4IFjygNbg2URDmxiWRZtVYEQUUDj8Wg2sIHtftAD0M0bxf+ah3ess04m6R8gQD+AhCGRSJRkDIFeJheAAL1iZKGic/IwVALIFSCK+/Y4UEGAIAgQVBQegkuJKXcRIYmXLALnwQSSEIHxCmLxEEyMLEo0nYWJQJhAgTzCRJEwIYLIOiBWK/NyzGDEww2I4adficRUY8xhlyULE4KT6ALJhGAegfsuJ4F0Kk2wBBaTzot4V4GhdPYxxniawtp/W7hgcRSaEAqFRZa4i6VqBbPqliAigT5JEIe0G7ATX6Ml3E1IpDYAEMMAADybbv5mgAQQAGBGJmgHbWAB9IJ3HIEFnN9LmAHjPDhh2vlK0XLpcv1y83LrWtjGb78456TwuuXGz3S/2O3YzdjF2IXYv9FmxAEI0PUD7jl7wPm3PcAluAUJKkUNzwRUSjFMQqWOsh4wBZVG+mbADFRa8cxDPQzPAjR//9Jb5I0mQORKgCXAIdgCHyADQDeA6JgMYbiUsUYJvITgmqa4UCEKLoBB2aCfYY/BdJ0bbNwe2kEGTL4zED0ssodoh046VfbZExa7Fvp2MsVAzU3GnqE0X2ad1R4eZj6yatxi5jBZ8B1nDNtpO0Lf69yAcZoJ8Fj7tTPsebdmYO73Nxr7f30ZV1F3DB1130fvgKBSnB0XUrA9p0VUVhsaXp8+/TooQzZNZRgL/ymXGxYOH17A0FMmMjO8esJXvyv9xjGuPAE8zXg9fXOchStgXsDLUvDs6vqHzPIX+zuwAAAEiPaxZ/31q9PuqpZqMADlR9J+gH/l6CJA/EUGujFAQAIkoBAfEACASMAIsD6bV2cw29VH2AgsCccBCQQCBTkAuozhqF0DXABDkCgzCMblIoIbcr9SqAhJhMVnkWX4r9ERR51z3D577HVSnAJ58pWK0+qII/Y4aJcscdodtkOOOPUOOijOwLr4BL1slxN2Oe60XXbK0c1xMrHv4zhY5b/DEYedWJq0xykHOY5rScUno/24PXYdJMxxYJyKwgs5YnKBQtnyZV+iLeN7tCfs0x1x8uXcmLuU33vIPk+LA2b5UAAAAA==\"","// match `[12:30.1][12:30.2]`\nexport var TAGS_REGEXP = /^(\\[.+\\])+/;\n// match `[ti: The Title]`\nexport var INFO_REGEXP = /^\\s*(\\w+)\\s*:(.*)$/;\n// match `[512:34.1] lyric content`\nexport var TIME_REGEXP = /^\\s*(\\d+)\\s*:\\s*(\\d+(\\s*[\\.:]\\s*\\d+)?)\\s*$/;\nexport var LineType;\n(function (LineType) {\n    LineType[\"INVALID\"] = \"INVALID\";\n    LineType[\"INFO\"] = \"INFO\";\n    LineType[\"TIME\"] = \"TIME\";\n})(LineType || (LineType = {}));\nexport function parseTags(line) {\n    line = line.trim();\n    var matches = TAGS_REGEXP.exec(line);\n    if (matches === null) {\n        return null;\n    }\n    var tag = matches[0];\n    var content = line.substr(tag.length);\n    return [tag.slice(1, -1).split(/\\]\\s*\\[/), content];\n}\nexport function parseTime(tags, content) {\n    var timestamps = [];\n    tags.forEach(function (tag) {\n        var matches = TIME_REGEXP.exec(tag);\n        var minutes = parseFloat(matches[1]);\n        var seconds = parseFloat(matches[2].replace(/\\s+/g, '').replace(':', '.'));\n        timestamps.push(minutes * 60 + seconds);\n    });\n    return {\n        type: LineType.TIME,\n        timestamps: timestamps,\n        content: content.trim(),\n    };\n}\nexport function parseInfo(tag) {\n    var matches = INFO_REGEXP.exec(tag);\n    return {\n        type: LineType.INFO,\n        key: matches[1].trim(),\n        value: matches[2].trim(),\n    };\n}\n/**\n * line parse lrc of timestamp\n * @example\n * const lp = parseLine('[ti: Song title]')\n * lp.type === LineParser.TYPE.INFO\n * lp.key === 'ti'\n * lp.value === 'Song title'\n *\n * const lp = parseLine('[10:10.10]hello')\n * lp.type === LineParser.TYPE.TIME\n * lp.timestamps === [10*60+10.10]\n * lp.content === 'hello'\n */\nexport function parseLine(line) {\n    var parsedTags = parseTags(line);\n    try {\n        if (parsedTags) {\n            var tags = parsedTags[0], content = parsedTags[1];\n            if (TIME_REGEXP.test(tags[0])) {\n                return parseTime(tags, content);\n            }\n            else {\n                return parseInfo(tags[0]);\n            }\n        }\n        return {\n            type: LineType.INVALID,\n        };\n    }\n    catch (_e) {\n        return {\n            type: LineType.INVALID,\n        };\n    }\n}\n","import { parseLine, LineType } from './line-parser';\nexport function padZero(num, size) {\n    if (size === void 0) { size = 2; }\n    while (num.toString().split('.')[0].length < size)\n        num = '0' + num;\n    return num;\n}\n/**\n * get lrc time string\n * @example\n * Lrc.timestampToString(143.54)\n * // return '02:23.54':\n * @param timestamp second timestamp\n */\nexport function timestampToString(timestamp) {\n    return padZero(Math.floor(timestamp / 60)) + \":\" + padZero((timestamp % 60).toFixed(2));\n}\nvar Lrc = /** @class */ (function () {\n    function Lrc() {\n        this.info = {};\n        this.lyrics = [];\n    }\n    /**\n     * parse lrc text and return a Lrc object\n     */\n    Lrc.parse = function (text) {\n        var lyrics = [];\n        var info = {};\n        text\n            .split(/\\r\\n|[\\n\\r]/g)\n            .map(function (line) {\n            return parseLine(line);\n        })\n            .forEach(function (line) {\n            switch (line.type) {\n                case LineType.INFO:\n                    info[line.key] = line.value;\n                    break;\n                case LineType.TIME:\n                    line.timestamps.forEach(function (timestamp) {\n                        lyrics.push({\n                            timestamp: timestamp,\n                            content: line.content,\n                        });\n                    });\n                    break;\n                default:\n                    break;\n            }\n        });\n        var lrc = new this();\n        lrc.lyrics = lyrics;\n        lrc.info = info;\n        return lrc;\n    };\n    Lrc.prototype.offset = function (offsetTime) {\n        this.lyrics.forEach(function (lyric) {\n            lyric.timestamp += offsetTime;\n            if (lyric.timestamp < 0) {\n                lyric.timestamp = 0;\n            }\n        });\n    };\n    Lrc.prototype.clone = function () {\n        function clonePlainObject(obj) {\n            var newObj = {};\n            for (var key in obj) {\n                newObj[key] = obj[key];\n            }\n            return newObj;\n        }\n        var lrc = new Lrc();\n        lrc.info = clonePlainObject(this.info);\n        lrc.lyrics = this.lyrics.reduce(function (ret, lyric) {\n            ret.push(clonePlainObject(lyric));\n            return ret;\n        }, []);\n        return lrc;\n    };\n    /**\n     * get lrc text\n     * @param opts.combine lyrics combine by same content\n     * @param opts.sort lyrics sort by timestamp\n     * @param opts.lineFormat newline format\n     */\n    Lrc.prototype.toString = function (opts) {\n        if (opts === void 0) { opts = {}; }\n        opts.combine = 'combine' in opts ? opts.combine : true;\n        opts.lineFormat = 'lineFormat' in opts ? opts.lineFormat : '\\r\\n';\n        opts.sort = 'sort' in opts ? opts.sort : true;\n        var lines = [], lyricsMap = {}, lyricsList = [];\n        // generate info\n        for (var key in this.info) {\n            lines.push(\"[\" + key + \":\" + this.info[key] + \"]\");\n        }\n        if (opts.combine) {\n            // uniqueness\n            this.lyrics.forEach(function (lyric) {\n                if (lyric.content in lyricsMap) {\n                    lyricsMap[lyric.content].push(lyric.timestamp);\n                }\n                else {\n                    lyricsMap[lyric.content] = [lyric.timestamp];\n                }\n            });\n            // sorted\n            for (var content in lyricsMap) {\n                if (opts.sort) {\n                    lyricsMap[content].sort();\n                }\n                lyricsList.push({\n                    timestamps: lyricsMap[content],\n                    content: content,\n                });\n            }\n            if (opts.sort) {\n                lyricsList.sort(function (a, b) { return a.timestamps[0] - b.timestamps[0]; });\n            }\n            // generate lyrics\n            lyricsList.forEach(function (lyric) {\n                lines.push(\"[\" + lyric.timestamps\n                    .map(function (timestamp) { return timestampToString(timestamp); })\n                    .join('][') + \"]\" + (lyric.content || ''));\n            });\n        }\n        else {\n            this.lyrics.forEach(function (lyric) {\n                lines.push(\"[\" + timestampToString(lyric.timestamp) + \"]\" + (lyric.content || ''));\n            });\n        }\n        return lines.join(opts.lineFormat);\n    };\n    return Lrc;\n}());\nexport { Lrc };\n","import { Lrc } from './lrc';\nvar Runner = /** @class */ (function () {\n    function Runner(lrc, offset) {\n        if (lrc === void 0) { lrc = new Lrc(); }\n        if (offset === void 0) { offset = true; }\n        this.offset = offset;\n        this._currentIndex = -1;\n        this.setLrc(lrc);\n    }\n    Runner.prototype.setLrc = function (lrc) {\n        this.lrc = lrc.clone();\n        this.lrcUpdate();\n    };\n    Runner.prototype.lrcUpdate = function () {\n        if (this.offset) {\n            this._offsetAlign();\n        }\n        this._sort();\n    };\n    Runner.prototype._offsetAlign = function () {\n        if ('offset' in this.lrc.info) {\n            var offset = parseInt(this.lrc.info.offset) / 1000;\n            if (!isNaN(offset)) {\n                this.lrc.offset(offset);\n                delete this.lrc.info.offset;\n            }\n        }\n    };\n    Runner.prototype._sort = function () {\n        this.lrc.lyrics.sort(function (a, b) { return a.timestamp - b.timestamp; });\n    };\n    Runner.prototype.timeUpdate = function (timestamp) {\n        if (this._currentIndex >= this.lrc.lyrics.length) {\n            this._currentIndex = this.lrc.lyrics.length - 1;\n        }\n        else if (this._currentIndex < -1) {\n            this._currentIndex = -1;\n        }\n        this._currentIndex = this._findIndex(timestamp, this._currentIndex);\n    };\n    Runner.prototype._findIndex = function (timestamp, startIndex) {\n        var curFrontTimestamp = startIndex == -1\n            ? Number.NEGATIVE_INFINITY\n            : this.lrc.lyrics[startIndex].timestamp;\n        var curBackTimestamp = startIndex == this.lrc.lyrics.length - 1\n            ? Number.POSITIVE_INFINITY\n            : this.lrc.lyrics[startIndex + 1].timestamp;\n        if (timestamp < curFrontTimestamp) {\n            return this._findIndex(timestamp, startIndex - 1);\n        }\n        else if (timestamp === curBackTimestamp) {\n            if (curBackTimestamp === Number.POSITIVE_INFINITY) {\n                return startIndex;\n            }\n            else {\n                return startIndex + 1;\n            }\n        }\n        else if (timestamp > curBackTimestamp) {\n            return this._findIndex(timestamp, startIndex + 1);\n        }\n        else {\n            return startIndex;\n        }\n    };\n    Runner.prototype.getInfo = function () {\n        return this.lrc.info;\n    };\n    Runner.prototype.getLyrics = function () {\n        return this.lrc.lyrics;\n    };\n    Runner.prototype.getLyric = function (index) {\n        if (index === void 0) { index = this.curIndex(); }\n        if (index >= 0 && index <= this.lrc.lyrics.length - 1) {\n            return this.lrc.lyrics[index];\n        }\n        else {\n            throw new Error('Index not exist');\n        }\n    };\n    Runner.prototype.curIndex = function () {\n        return this._currentIndex;\n    };\n    Runner.prototype.curLyric = function () {\n        return this.getLyric();\n    };\n    return Runner;\n}());\nexport { Runner };\n","// https://codepen.io/caesarsol/pen/dNejPG\n// JSX for document.createElement()\n\nexport default function h(name, attr, ...children) {\n    const elm = document.createElement(name);\n\n    if (attr) {\n        Object.entries(attr).forEach(([k, v]) => {\n            if (k === 'ref') {\n                v(elm);\n                return;\n            }\n            switch (typeof v) {\n                case 'string':\n                    elm.setAttribute(k, v);\n                    break;\n                case 'function':\n                    const ev = k.replace(/^on/, '').toLowerCase(); // eslint-disable-line no-case-declarations\n                    elm.addEventListener(ev, v);\n                    break;\n            }\n        });\n    }\n\n    children.forEach(child => {\n        if (typeof child === 'string') {\n            elm.appendChild(document.createTextNode(child));\n        } else {\n            elm.appendChild(child);\n        }\n    });\n\n    return elm;\n}\n","'use strict';\n\nimport { Lrc } from 'lrc-kit';\n\nimport h from './h.js'; // eslint-disable-line no-unused-vars\nimport PLAYER_STYLE from './player.less';\nimport PLAYER_FONT_FACE from './font-face.less';\n\nclass MelodyPlayer extends HTMLElement {\n    static get TagName() { return 'melody-player'; }\n\n    static get LoopMode() {\n        return {\n            Once: 0,\n            Single: 1,\n            List: 2,\n            Shuffle: 3,\n            0: 'once',\n            1: 'single',\n            2: 'list',\n            3: 'shuffle'\n        };\n    }\n\n    static get LyricStatus() {\n        return {\n            Loading: 0,\n            Loaded: 1,\n            Failed: 2,\n            None: 3,\n            0: 'loading',\n            1: 'loaded',\n            2: 'failed',\n            3: 'none'\n        };\n    }\n\n    static get LogTag() { return '[MelodyPlayer]'; }\n\n    static defineElement() {\n        if (!window.customElements.get(this.TagName)) {\n            window.customElements.define(this.TagName, this);\n            document.head.appendChild(<style>{PLAYER_FONT_FACE.toString()}</style>);\n        }\n    }\n\n    static log(...args) {\n        console.log(MelodyPlayer.LogTag, ...args); // eslint-disable-line no-console\n    }\n\n    static err(...args) {\n        console.error(MelodyPlayer.LogTag, ...args); // eslint-disable-line no-console\n    }\n\n    static percent(num) {\n        if (typeof num !== 'number') {\n            throw new Error('percent must be number');\n        }\n        return `${(num * 100).toFixed(2)}%`;\n    }\n\n    static time(num) {\n        if (typeof num !== 'number') {\n            throw new Error('time must be number');\n        }\n        const dt = new Date(num * 1000);\n        const mm = dt.getUTCMinutes() + dt.getUTCHours() * 60;\n        const ss = dt.getUTCSeconds();\n        return [mm, ss > 9 ? ss : `0${ss}`].join(':');\n    }\n\n    /**\n     * hide HTML element; set style.display to none\n     * @param {HTMLElement} elm\n     * @param {boolean} hide hide or unhide\n     */\n    static hide(elm, hide = true) {\n        elm.style.display = hide ? 'none' : '';\n    }\n\n    get singleMode() { return this._singleMode; }\n    set singleMode(value) {\n        if (value !== this._singleMode) {\n            window.requestAnimationFrame(() => {\n                if (value === true) {\n                    this.hostElem.setAttribute('single', '');\n                } else {\n                    this.hostElem.removeAttribute('single');\n                }\n            });\n            this._singleMode = value;\n        }\n    }\n\n    get playing() { return this._playing; }\n    set playing(value) {\n        if (value !== this._playing) {\n            this._playing = value;\n            const elm = this.btnPlay;\n            window.requestAnimationFrame(() => {\n                elm.textContent = elm.dataset[value ? 'pause' : 'play'];\n            });\n            try { this.syncProgress(); } catch (e) { /* just ignore */ }\n        }\n    }\n\n    get playIndex() { return this._playIndex; }\n    set playIndex(value) {\n        if (value !== this._playIndex) {\n            this._playIndex = value;\n            const au = this.audios[value];\n            if (Number.isNaN(au.duration)) {\n                au.addEventListener('loadedmetadata', () => {\n                    this.timerTotal.textContent = MelodyPlayer.time(au.duration);\n                });\n            } else {\n                this.timerTotal.textContent = MelodyPlayer.time(au.duration);\n            }\n            this.syncProgress();\n            this.fetchLyric().then(shouldRender => shouldRender ? this.renderLyric() : null);\n        }\n    }\n\n    get lyricStatus() { return this._lyricStatus; }\n    set lyricStatus(value) {\n        if (value !== this._lyricStatus) {\n            this._lyricStatus = value;\n            [\n                this.lyricMaskLoading,\n                this.containerLyric,\n                this.lyricMaskFailed,\n                this.lyricMaskNone\n            ].forEach((elm, i) => MelodyPlayer.hide(elm, value !== i));\n        }\n    }\n\n    get lyricIndex() { return this._lyricIndex; }\n    set lyricIndex(value) {\n        if (value !== this._lyricIndex) {\n            window.requestAnimationFrame(((before, current) => {\n                const bf = this.lyrics[before];\n                if (bf) { bf.classList.remove('active'); }\n                const cur = this.lyrics[current];\n                if (cur) { cur.classList.add('active'); }\n                let offset = 150 / 2\n                    - cur.clientHeight / 2\n                    - cur.offsetTop\n                    - 16;\n                this.containerLyric.style.transform = `translateY(${offset}px)`;\n            }).bind(this, this._lyricIndex, value));\n            this._lyricIndex = value;\n        }\n    }\n\n    get loopMode() { return this._loopMode; }\n    set loopMode(value) {\n        if (value !== this._loopMode) {\n            this._loopMode = value;\n            const elm = this.btnLoop;\n            window.requestAnimationFrame(() => {\n                elm.textContent = elm.dataset[MelodyPlayer.LoopMode[value]];\n            });\n        }\n    }\n\n    get displayVisible() { return this._displayVisible; }\n    set displayVisible(value) {\n        if (value !== this._displayVisible) {\n            window.requestAnimationFrame(() => {\n                if (value === true) {\n                    this.btnLyric.classList.add('flip');\n                    this.containerDisplay.classList.add('active');\n                } else {\n                    this.btnLyric.classList.remove('flip');\n                    this.containerDisplay.classList.remove('active');\n                }\n            });\n            this._displayVisible = value;\n        }\n    }\n\n    /**\n     * current playing audio element\n     */\n    get au() { return this.audios[this._playIndex]; }\n\n    /**\n     * add audio to `this.audios` and add event listeners\n     * @param {HTMLAudioElement} audio\n     */\n    registerAudio(audio) {\n        this.audios.push(audio);\n        const evInit = { detail: { audio } };\n        audio.addEventListener('play', () => {\n            this.playing = true;\n            this.handleAudioPlaying();\n            this.dispatchEvent(new CustomEvent('play', evInit));\n        });\n        audio.addEventListener('pause', () => {\n            this.playing = false;\n            this.dispatchEvent(new CustomEvent('pause', evInit));\n        });\n        audio.addEventListener('ended', () => {\n            this.handleAudioEnd();\n            this.dispatchEvent(new CustomEvent('audioend', evInit));\n        });\n    }\n\n    init() {\n        this.playing = false;\n        this.loopMode = MelodyPlayer.LoopMode.Once;\n        this.displayVisible = false;\n        const { length } = this.audios;\n        if (length > 0) {\n            this.playIndex = 0;\n            this.singleMode = length === 1;\n        }\n    }\n\n    updateProgress() {\n        const { buffered, currentTime, duration } = this.au;\n        const played = currentTime / duration;\n        let loaded = 0;\n        if (buffered.length !== 0) {\n            loaded = buffered.end(buffered.length - 1) / duration;\n        }\n        window.requestAnimationFrame(() => {\n            this.timerPlay.textContent = MelodyPlayer.time(currentTime);\n            this.progressPlay.style.width = MelodyPlayer.percent(played);\n            this.progressLoad.style.width = MelodyPlayer.percent(loaded);\n        });\n    }\n\n    syncProgress() {\n        [this.progressPlay, this.progressLoad].forEach(/** @type {HTMLDivElement} */ elm => {\n            window.requestAnimationFrame(() => elm.classList.add('seek'));\n            setTimeout(() => {\n                window.requestAnimationFrame(() => elm.classList.remove('seek'));\n            }, 200);\n        });\n        this.updateProgress();\n    }\n\n    /**\n     * fetch lrc and attach them to audio element props\n     * @returns {Promise<Boolean>}\n     */\n    fetchLyric() {\n        this.lyricStatus = 0; // Loading\n        const au = this.audios[this._playIndex];\n        const urls = {\n            lrc: au.dataset['lrc'],\n            subLrc: au.dataset['subLrc']\n        };\n        // TODO: cache lyric; retry when cache invalid\n        // maybe the browser would do it?\n        /** @type {Promise<void>[]} */\n        const tasks = [];\n        for (const type in urls) {\n            const lrcUrl = urls[type];\n            if (lrcUrl) {\n                const promise = fetch(lrcUrl).then(r => {\n                    if (r.ok) {\n                        return r.text();\n                    }\n                    throw r;\n                }).then(t => {\n                    try {\n                        au[type] = Object.assign({ status: 1 }, Lrc.parse(t));\n                    } catch (e) {\n                        MelodyPlayer.err('parse lrc', e);\n                        au[type] = { status: 2, lyrics: [] }; // Failed\n                    }\n                }).catch(e => {\n                    MelodyPlayer.err('fetch lyric', e);\n                    au[type] = { status: 2, lyrics: [] }; // Failed\n                });\n                tasks.push(promise);\n            } else {\n                au[type] = { status: 3, lyrics: [] }; // None\n            }\n        }\n        // if playIndex changed when fetching lyric, then shouldn't be rendered\n        return Promise.all(tasks).then(() => au === this.au);\n    }\n\n    /**\n     * render to lrc element\n     */\n    renderLyric() {\n        const au = this.audios[this._playIndex];\n        if (au.lrc.status === 3 && au.subLrc.status === 3) { // None\n            this.lyricStatus = 3;\n            return;\n        }\n        if (au.lrc.status !== 1 && au.subLrc.status !== 1) { // Failed\n            this.lyricStatus = 2;\n            return;\n        }\n        this.lyricStatus = 1; // Loaded\n        const cmp = (a, b) => a.timestamp - b.timestamp;\n        /** @type {Array.<{timestamp:number;content:string}>} */\n        const lrc = au.lrc.lyrics.sort(cmp);\n        /** @type {Array.<{timestamp:number;content:string}>} */\n        const subLrc = au.subLrc.lyrics.sort(cmp);\n        /** @type {Array.<{timestamp:number;content:string}>} */\n        const lyrics = [{ timestamp: 0, content: '\\n' }], lyricElms = [];\n        let i = 0, j = 0;\n        while (i < lrc.length || j < subLrc.length) {\n            const l = lrc[i], sl = subLrc[j];\n            if (l && sl && l.timestamp === sl.timestamp) {\n                lyrics.push({ timestamp: l.timestamp, content: `${l.content}\\n${sl.content}` });\n                i++ , j++;\n            } else if (!l && sl || l && sl && l.timestamp > sl.timestamp) {\n                lyrics.push({ timestamp: sl.timestamp, content: sl.content });\n                j++;\n            } else if (!sl && l || l && sl && sl.timestamp > l.timestamp) {\n                lyrics.push({ timestamp: l.timestamp, content: l.content });\n                i++;\n            }\n        }\n        const frag = document.createDocumentFragment();\n        for (const line of lyrics) {\n            const elm = <p class='line' data-timestamp={line.timestamp}>{line.content || '\\n'}</p>;\n            elm.timestamp = line.timestamp;\n            frag.appendChild(elm);\n            lyricElms.push(elm);\n        }\n        this.lyrics = lyricElms;\n        window.requestAnimationFrame(() => {\n            this.containerLyric.textContent = '';\n            this.containerLyric.appendChild(frag);\n            this.nextLyricIndex();\n        });\n    }\n\n    nextLyricIndex() {\n        if (this._lyricStatus !== 1) { // Not Loaded\n            return this.lyricIndex = 0;\n        }\n        const { currentTime } = this.au;\n        let loopStart = this._lyricIndex || 0;\n        // decide where to start loop\n        const activeLyric = this.lyrics[this._lyricIndex];\n        if (activeLyric) {\n            const activeTime = activeLyric.timestamp || +activeLyric.dataset['timestamp'];\n            if (currentTime < activeTime) {\n                // audio seek back, loop lyric from 0\n                loopStart = 0;\n            }\n        }\n        for (let i = loopStart; i < this.lyrics.length; i++) {\n            const elm = this.lyrics[i];\n            const time = elm.timestamp || +elm.dataset['timestamp'];\n            if (time > currentTime) {\n                return this.lyricIndex = !i ? 0 : i - 1;\n            }\n        }\n        return this.lyricIndex = this.lyrics.length - 1;\n    }\n\n    handleAudioPlaying() {\n        const time = this.au.currentTime;\n        // audio loop when `this._singleMode` true\n        if (time < this._currentSecond) {\n            this.syncProgress();\n            this._currentSecond = Math.floor(time);\n        }\n        if (time - this._currentSecond > 1) {\n            this.updateProgress();\n            this._currentSecond = Math.floor(time);\n        }\n        if (this._lyricStatus === 1 && this._displayVisible) { // Loaded\n            this.nextLyricIndex();\n        }\n        if (this._playing) {\n            setTimeout(() => this.handleAudioPlaying(), 166);\n        }\n    }\n\n    _play() {\n        return this.au.play();\n    }\n\n    /**\n     * @param {number} position time to seek after pause\n     */\n    _pause(position = true) {\n        this.au.pause();\n        if (position === 0) {\n            this.au.currentTime = 0;\n        }\n    }\n\n    handlePlayOrPause() {\n        if (this._playing) {\n            this._pause();\n        } else {\n            this._play();\n        }\n    }\n\n    /**\n     * @param {number} offset next offset\n     * @param {boolean} force force switch to next track\n     */\n    nextPlayIndex(offset = 1, force = false) {\n        const mode = this.loopMode;\n        const total = this.audios.length;\n        let i = this._playIndex;\n        if (force === true || mode === 0 || mode === 2) { // Once || List\n            i = (total + i + offset);\n        } else if (mode === 3) { // Shuffle\n            i = Math.floor(Math.random() * total);\n        }\n        this.playIndex = i % total;\n    }\n\n    /**\n     * @param {number} offset next offset\n     */\n    handleNext(offset = 1) {\n        this._pause(0);\n        this.nextPlayIndex(offset, this._loopMode === 1);\n        this._play();\n    }\n\n    handleAudioEnd() {\n        this._pause(0);\n        this.nextLyricIndex();\n        this.nextPlayIndex();\n        if (this._loopMode === 0 && this._playIndex === 0) {\n            this.playing = false;\n            this.dispatchEvent(new CustomEvent('playend'));\n        } else {\n            this._play();\n        }\n    }\n\n    handleLoopMode() {\n        if (this._singleMode) {\n            if (this._loopMode === 1) {\n                this.loopMode = 0;\n            } else {\n                this.loopMode = 1;\n            }\n            this.audios[0].loop = this._loopMode === 1;\n        } else {\n            this.loopMode = (this.loopMode + 1) % 4;\n        }\n    }\n\n    /**\n     * handle click on progress bar\n     * @param {MouseEvent} ev MouseEvent from click listener\n     */\n    handleProgressSeek(ev) {\n        const rect = this.progressFull.getBoundingClientRect();\n        const seekTime = (ev.clientX - rect.left) / rect.width * this.au.duration;\n        this.au.currentTime = seekTime;\n        this.syncProgress();\n        if (this._displayVisible) {\n            this.nextLyricIndex();\n        }\n        this._currentSecond = Math.floor(seekTime);\n    }\n\n    handleToggleDisplay() {\n        this.displayVisible = !this._displayVisible;\n    }\n\n    render() {\n        const shadow = this.attachShadow({ mode: process.env.NODE_ENV === 'development' ? 'open' : 'closed' });\n        const style = <style>{PLAYER_STYLE.toString()}</style>;\n        this.hostElem = (\n            <div class=\"__mld__\">\n                <div ref={r => this.containerDisplay = r} class=\"disp\">\n                    <div ref={r => this.lyricMaskLoading = r} class=\"lrc mask\"><p class=\"line\">{'歌词加载中\\nLoading Lyric\\n歌詞を読み込む'}</p></div>\n                    <div ref={r => this.lyricMaskFailed = r} class=\"lrc mask\"><p class=\"line\">{'歌词加载失败\\nFailed to Load Lyric\\n歌詞を読み込めません'}</p></div>\n                    <div ref={r => this.lyricMaskNone = r} class=\"lrc mask\"><p class=\"line\">{'暂无歌词\\nNo Lyric\\n歌詞なし'}</p></div>\n                    <div ref={r => this.containerLyric = r} class=\"lrc\"></div>\n                </div>\n                <div class=\"ctl\">\n                    <div class=\"ctl-left\">\n                        <button ref={r => this.btnPrev = r} onClick={() => this.handleNext(-1)}>skip_previous</button>\n                        <button ref={r => this.btnPlay = r} onClick={() => this.handlePlayOrPause()} data-play=\"play_arrow\" data-pause=\"pause\">stop</button>\n                        <button ref={r => this.btnNext = r} onClick={() => this.handleNext()}>skip_next</button>\n                    </div>\n                    <div ref={r => this.progressFull = r} onClick={ev => this.handleProgressSeek(ev)} class=\"porgress\">\n                        <div ref={r => this.progressLoad = r} class=\"load\"></div>\n                        <div ref={r => this.progressPlay = r} class=\"play\"></div>\n                    </div>\n                    <div class=\"timer\"><span ref={r => this.timerPlay = r}>0:00</span> / <span ref={r => this.timerTotal = r}>0:00</span></div>\n                    <div class=\"ctl-right\">\n                        <button ref={r => this.btnLoop = r} onClick={() => this.handleLoopMode()} data-once=\"subdirectory_arrow_right\" data-single=\"repeat_one\" data-list=\"repeat\" data-shuffle=\"shuffle\">cancel</button>\n                        <button ref={r => this.btnLyric = r} onClick={() => this.handleToggleDisplay()}>keyboard_capslock</button>\n                    </div>\n                </div>\n            </div>\n        );\n        window.requestAnimationFrame(() => {\n            shadow.appendChild(style);\n            shadow.appendChild(this.hostElem);\n            this.setAttribute('rendered', '');\n        });\n    }\n\n    constructor() {\n        super();\n        /** @type {boolean} */\n        this._singleMode = null;\n        this._currentSecond = 0;\n        /** @type {boolean} */\n        this._playing = null;\n        /** @type {HTMLAudioElement[]} */\n        this.audios = [];\n        /** @type {number} */\n        this._playIndex = null;\n        /** @type {number} */\n        this._lyricStatus = null;\n        /** @type {HTMLParagraphElement[]} */\n        this.lyrics = null;\n        /** @type {number} */\n        this._lyricIndex = null;\n        /** @type {number} */\n        this._loopMode = null;\n        /** @type {boolean} */\n        this._displayVisible = null;\n        /** @type {HTMLElement} */\n        this.hostElem = null;\n        /** @type {HTMLDivElement} */\n        this.containerDisplay = null;\n        /** @type {HTMLDivElement} */\n        this.lyricMaskLoading = null;\n        /** @type {HTMLDivElement} */\n        this.lyricMaskFailed = null;\n        /** @type {HTMLDivElement} */\n        this.lyricMaskNone = null;\n        /** @type {HTMLDivElement} */\n        this.containerLyric = null;\n        /** @type {HTMLDivElement} */\n        this.progressFull = null;\n        /** @type {HTMLDivElement} */\n        this.progressPlay = null;\n        /** @type {HTMLDivElement} */\n        this.progressLoad = null;\n        /** @type {HTMLSpanElement} */\n        this.timerPlay = null;\n        /** @type {HTMLSpanElement} */\n        this.timerTotal = null;\n        /** @type {HTMLButtonElement} */\n        this.btnPrev = null;\n        /** @type {HTMLButtonElement} */\n        this.btnPlay = null;\n        /** @type {HTMLButtonElement} */\n        this.btnNext = null;\n        /** @type {HTMLButtonElement} */\n        this.btnLoop = null;\n        /** @type {HTMLButtonElement} */\n        this.btnLyric = null;\n        Promise.resolve().then(() => {\n            Array.from(this.children)\n                .filter(elm => elm instanceof HTMLAudioElement)\n                .map(elm => this.registerAudio(elm));\n            this.init();\n            const evInit = { detail: { audios: this.audios } };\n            this.dispatchEvent(new CustomEvent('ready', evInit));\n        });\n        this.render();\n    }\n}\n\n(cb => {\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', cb);\n    } else {\n        cb();\n    }\n})(() => MelodyPlayer.defineElement());\n"],"sourceRoot":""}